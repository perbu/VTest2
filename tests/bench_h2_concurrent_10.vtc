vtest "HTTP/2 Concurrent Streams (10) Benchmark"

# Test 10 concurrent HTTP/2 streams

server s1 {
    rxreq
    txresp -status 200 -body "Response 1"
    rxreq
    txresp -status 200 -body "Response 2"
    rxreq
    txresp -status 200 -body "Response 3"
    rxreq
    txresp -status 200 -body "Response 4"
    rxreq
    txresp -status 200 -body "Response 5"
    rxreq
    txresp -status 200 -body "Response 6"
    rxreq
    txresp -status 200 -body "Response 7"
    rxreq
    txresp -status 200 -body "Response 8"
    rxreq
    txresp -status 200 -body "Response 9"
    rxreq
    txresp -status 200 -body "Response 10"
} -start

client c1 -connect ${s1_sock} {
    txreq -url "/1"
    txreq -url "/2"
    txreq -url "/3"
    txreq -url "/4"
    txreq -url "/5"
    txreq -url "/6"
    txreq -url "/7"
    txreq -url "/8"
    txreq -url "/9"
    txreq -url "/10"

    rxresp
    rxresp
    rxresp
    rxresp
    rxresp
    rxresp
    rxresp
    rxresp
    rxresp
    rxresp
} -run
